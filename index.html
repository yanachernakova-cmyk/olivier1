<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CUBED — Olivier in Jars</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f6f1e8;
        --ink: #23201c;
        --muted: #6f6a61;
        --accent: #7a8c7a;
        --accent-dark: #6a7b6a;
        --card: #fbfaf7;
        --stone: #fbf7f0;
        --oat: #f4efe6;
        --shadow: 0 18px 40px rgba(26, 24, 19, 0.08);
        --shadow-soft: 0 14px 30px rgba(26, 24, 19, 0.06);
        --radius: 18px;
        --radius-soft: 36px;
      }

      * {
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
          "Helvetica Neue", Arial, sans-serif;
        color: var(--ink);
        background:
          radial-gradient(1200px 900px at 10% -10%, #fffaf0 0%, transparent 60%),
          radial-gradient(900px 700px at 90% 10%, #f3ede3 0%, transparent 55%),
          var(--bg);
        min-height: 100vh;
        line-height: 1.6;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image: radial-gradient(
          rgba(0, 0, 0, 0.06) 0.5px,
          transparent 0.5px
        );
        background-size: 3px 3px;
        opacity: 0.25;
        pointer-events: none;
        z-index: -1;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      :focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 3px;
        border-radius: 8px;
      }

      header,
      section,
      footer {
        padding: 32px 20px;
      }

      header {
        padding: 18px 20px;
        position: sticky;
        top: 0;
        z-index: 10;
        background: rgba(246, 241, 232, 0.9);
        backdrop-filter: blur(6px);
        border-bottom: 1px solid rgba(35, 32, 28, 0.08);
      }

      .container {
        max-width: 1100px;
        margin: 0 auto;
      }

      header .container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 24px;
        min-height: 64px;
      }

      .logo {
        font-size: 1.2rem;
        letter-spacing: 0.15em;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        text-transform: uppercase;
      }

      .cube {
        width: 18px;
        height: 18px;
        border-radius: 4px;
        background: linear-gradient(
          120deg,
          #e8dbc7 0%,
          #c8d3b8 35%,
          #d8c5a6 65%,
          #a7b59a 100%
        );
        background-size: 300% 300%;
        background-position: 0% 50%;
        box-shadow:
          inset -2px -2px 4px rgba(0, 0, 0, 0.08),
          inset 2px 2px 4px rgba(255, 255, 255, 0.7),
          0 8px 18px rgba(26, 24, 19, 0.16);
        transform-origin: center;
        animation: cube-float 4.5s ease-in-out infinite,
          cube-tint 14s ease-in-out infinite;
      }

      @keyframes cube-float {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-6px) rotate(4deg);
        }
      }

      @keyframes cube-tint {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      h1 {
        font-size: clamp(2.4rem, 6vw, 4.5rem);
        line-height: 1.1;
        margin: 0 0 16px;
        letter-spacing: -0.02em;
      }

      h2 {
        font-size: clamp(1.6rem, 3.2vw, 2.6rem);
        margin: 0 0 20px;
        letter-spacing: -0.01em;
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-weight: 500;
      }

      p {
        margin: 0 0 16px;
        color: var(--muted);
      }

      #hero {
        padding-top: 88px;
        padding-bottom: 72px;
      }

      #varieties {
        padding-top: 10px;
      }

      #reviews {
        padding-top: 72px;
        padding-bottom: 72px;
      }

      #tracking {
        padding-top: 72px;
        padding-bottom: 72px;
      }

      .hero-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.6fr);
        gap: 48px;
        align-items: center;
      }

      .hero-label {
        font-size: 0.75rem;
        letter-spacing: 0.24em;
        text-transform: uppercase;
        color: var(--accent);
        margin-bottom: 12px;
        font-weight: 600;
      }

      .hero-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: clamp(2.8rem, 6.2vw, 4.8rem);
        font-weight: 500;
        line-height: 1.06;
        margin: 0 0 18px;
        color: var(--ink);
      }

      .hero-text {
        max-width: 720px;
      }

      .hero-subtitle {
        font-size: 1.1rem;
        color: var(--ink);
        margin-bottom: 6px;
      }

      .hero-pronounce {
        font-size: 0.95rem;
        color: var(--muted);
        margin-bottom: 16px;
        font-style: italic;
      }

      .hero-body {
        max-width: 520px;
        color: var(--muted);
      }

      .hero-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-top: 24px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 999px;
        padding: 12px 22px;
        font-size: 0.95rem;
        font-weight: 600;
        border: 1px solid transparent;
        transition: transform 200ms ease, box-shadow 200ms ease,
          background-color 200ms ease, color 200ms ease;
        cursor: pointer;
      }

      .btn-primary {
        background: var(--accent);
        color: #fff;
      }

      .btn-secondary {
        border-color: rgba(29, 28, 26, 0.15);
        color: var(--ink);
        background: #fff;
      }

      .btn:hover {
        transform: translateY(-2px);
      }

      .btn-primary:hover {
        background: var(--accent-dark);
      }

      .btn-secondary:hover {
        border-color: rgba(29, 28, 26, 0.3);
      }

      .btn-outline {
        background: transparent;
        border-color: rgba(29, 28, 26, 0.2);
      }

      .btn-outline:hover {
        border-color: rgba(29, 28, 26, 0.35);
        background: rgba(255, 255, 255, 0.6);
      }

      .hero-jar {
        display: grid;
        place-items: center;
        min-height: 360px;
        gap: 12px;
        justify-items: center;
      }

      .hero-jar-outline {
        width: min(300px, 70vw);
        height: min(420px, 70vh);
        border-radius: 34px;
        border: 1.5px solid rgba(104, 96, 86, 0.35);
        padding: 18px;
        background: rgba(255, 255, 255, 0.45);
        position: relative;
        overflow: hidden;
        animation: jar-float 6s ease-in-out infinite;
      }

      .hero-jar-lid {
        position: absolute;
        top: -16px;
        left: 50%;
        transform: translateX(-50%);
        width: 70%;
        height: 20px;
        border-radius: 999px;
        background: #c9b77a;
        box-shadow: 0 8px 18px rgba(117, 103, 68, 0.18);
      }

      .hero-jar-opening {
        position: absolute;
        top: 10px;
        left: 14%;
        right: 14%;
        height: 18px;
        border-radius: 999px;
        border: 1px solid rgba(104, 96, 86, 0.25);
        background: rgba(255, 255, 255, 0.6);
      }

      .hero-jar-dropzone {
        position: absolute;
        top: 4px;
        left: 18%;
        right: 18%;
        height: 28px;
        pointer-events: none;
      }

      .hero-jar-cubes {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .hero-jar-content {
        position: absolute;
        left: 18px;
        right: 18px;
        bottom: 18px;
        top: 56px;
        display: flex;
        align-items: flex-end;
      }

      .hero-jar-layers {
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        gap: 10px;
      }

      .hero-jar-layer {
        height: var(--layer-h, 32px);
        border-radius: 14px;
        transition: height 600ms ease;
      }

      .cube-drop {
        position: absolute;
        top: 0;
        opacity: 0.9;
        border-radius: 3px;
        box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.5);
        animation: cube-fall var(--duration) ease-in forwards;
      }

      @keyframes cube-fall {
        0% {
          transform: translate3d(0, -12px, 0) rotate(0deg);
          opacity: 0;
        }
        15% {
          opacity: 0.9;
        }
        90% {
          opacity: 0.9;
        }
        100% {
          transform: translate3d(var(--drift), var(--fall-distance), 0)
            rotate(var(--rot));
          opacity: 0;
        }
      }

      .jar-toggle {
        background: none;
        border: none;
        padding: 0;
        font-size: 0.7rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: var(--muted);
        cursor: pointer;
        transition: color 160ms ease;
      }

      .jar-toggle:hover {
        color: var(--ink);
      }

      .jar-toggle[disabled] {
        cursor: default;
        opacity: 0.6;
      }

      @keyframes jar-float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      .site-nav {
        display: inline-flex;
        gap: 22px;
        font-size: 0.95rem;
        color: var(--muted);
      }

      .site-nav a {
        transition: color 180ms ease, opacity 180ms ease;
        cursor: pointer;
      }

      .site-nav a:hover {
        color: var(--ink);
      }

      .header-cta {
        padding: 10px 20px;
        font-size: 0.9rem;
        font-weight: 600;
        box-shadow: none;
      }

      .header-cta:hover {
        background: var(--accent-dark);
        box-shadow: none;
      }

      .process-card {
        width: min(1100px, 100%);
        background: var(--stone);
        border-radius: var(--radius-soft);
        padding: 42px 48px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        display: grid;
        gap: 32px;
      }

      .process-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 36px;
      }

      .step-label {
        font-size: 0.75rem;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        color: var(--accent);
        margin: 0 0 14px;
        font-weight: 600;
      }

      .step-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: 1.6rem;
        font-weight: 500;
        margin: 0 0 12px;
        color: var(--ink);
      }

      .step-text {
        margin: 0;
        color: var(--muted);
        line-height: 1.6;
        max-width: 320px;
      }

      .variety-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 32px;
      }

      .variety-intro {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: clamp(1.6rem, 2.8vw, 2.2rem);
        font-style: italic;
        text-align: center;
        color: var(--ink);
        margin: 70px 0 100px;
      }

      .variety-card {
        background: var(--stone);
        border-radius: 24px;
        padding: 36px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        box-shadow: var(--shadow-soft);
        display: grid;
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
        gap: 32px;
        align-items: start;
        transition: transform 180ms ease, box-shadow 180ms ease;
      }

      .variety-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 36px rgba(26, 24, 19, 0.08);
      }

      .variety-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 6px 12px;
        border-radius: 999px;
        background: rgba(122, 140, 122, 0.18);
        color: var(--accent-dark);
        font-size: 0.72rem;
        font-weight: 600;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        width: fit-content;
      }

      .variety-name {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: clamp(1.7rem, 3vw, 2.3rem);
        font-weight: 500;
        margin: 16px 0 12px;
        color: var(--ink);
      }

      .variety-tagline {
        color: var(--ink);
        font-size: 1.05rem;
        margin: 0 0 14px;
      }

      .variety-desc {
        color: var(--muted);
        margin: 0 0 22px;
      }

      .nutrition-row {
        display: inline-flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        font-size: 0.92rem;
        color: var(--muted);
        margin-bottom: 18px;
      }

      .nutrition-row span {
        color: var(--ink);
        font-weight: 600;
      }

      .size-options {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 18px;
      }

      .size-pill {
        border: 1px solid rgba(35, 32, 28, 0.12);
        background: rgba(255, 255, 255, 0.6);
        color: var(--muted);
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: background-color 180ms ease, border-color 180ms ease,
          color 180ms ease;
      }

      .size-pill.is-active {
        background: rgba(122, 140, 122, 0.2);
        border-color: rgba(122, 140, 122, 0.4);
        color: var(--ink);
      }

      .add-to-cart {
        border: none;
        background: var(--accent);
        color: #fff;
        padding: 10px 16px;
        border-radius: 999px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 180ms ease, transform 180ms ease;
        margin-bottom: 12px;
      }

      .add-to-cart:hover {
        background: var(--accent-dark);
        transform: translateY(-1px);
      }

      .allergens {
        font-size: 0.85rem;
        color: rgba(111, 106, 97, 0.85);
        margin: 0;
      }

      .variety-visual {
        background: #f2ecdf;
        border-radius: 22px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        padding: 24px;
        display: grid;
        place-items: center;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      }

      .jar-visual {
        width: 100%;
        max-width: 240px;
        border-radius: 28px;
        border: 1.5px solid rgba(104, 96, 86, 0.3);
        background: #f7f0e4;
        padding: 18px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 12px 26px rgba(26, 24, 19, 0.08);
      }

      .jar-visual::before {
        content: "";
        position: absolute;
        top: 8px;
        left: 12px;
        right: 12px;
        height: 18px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.35);
      }

      .jar-visual-layers {
        display: grid;
        gap: 12px;
        padding-top: 18px;
      }

      .jar-layer {
        border-radius: 14px;
        padding: 10px 12px;
        font-size: 0.75rem;
        color: rgba(35, 32, 28, 0.7);
        background: #e8dbc7;
        display: flex;
        align-items: center;
        min-height: 36px;
      }

      .reviews-intro {
        text-align: center;
        margin-bottom: 28px;
      }

      .reviews-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-style: italic;
        font-size: clamp(1.6rem, 3vw, 2.2rem);
        color: var(--muted);
        margin: 0 0 6px;
      }

      .reviews-subtitle {
        font-size: 0.95rem;
        color: var(--muted);
        margin: 0;
      }

      .reviews-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 24px;
      }

      .tracking-intro {
        text-align: center;
        margin-bottom: 28px;
      }

      .tracking-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-style: italic;
        font-size: clamp(1.5rem, 2.6vw, 2rem);
        color: var(--muted);
        margin: 0 0 6px;
      }

      .tracking-subtitle {
        font-size: 0.95rem;
        color: var(--muted);
        margin: 0;
      }

      .timeline-card,
      .timeslot-card {
        background: var(--stone);
        border-radius: 22px;
        padding: 24px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        box-shadow: var(--shadow-soft);
      }

      .timeline {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 18px;
        align-items: center;
        text-align: center;
        width: min(720px, 100%);
        margin: 0 auto;
        padding: 0 8px;
      }

      .timeline-step {
        display: grid;
        gap: 6px;
        width: 100%;
        align-items: center;
      }

      .timeline-label {
        font-size: 0.75rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--accent);
        font-weight: 600;
      }

      .timeline-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: 1.2rem;
        color: var(--ink);
        margin: 0;
      }

      .timeline-time {
        font-size: 0.85rem;
        color: var(--muted);
      }

      .timeslot-card {
        margin-top: 18px;
        padding: 28px;
        display: grid;
        gap: 16px;
        justify-items: center;
      }

      .timeslot-table {
        width: min(720px, 100%);
        border-collapse: collapse;
        font-size: 0.95rem;
        color: var(--muted);
      }

      .timeslot-table th,
      .timeslot-table td {
        text-align: center;
        padding: 12px 8px;
      }

      .timeslot-table thead th {
        font-size: 0.75rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: var(--accent);
        font-weight: 600;
      }

      .timeslot-table tbody tr {
        border-top: 1px solid rgba(35, 32, 28, 0.08);
      }

      .slot-name {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        color: var(--ink);
        font-size: 1.05rem;
      }

      .slot-status {
        color: var(--muted);
      }

      .slot-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 4px 10px;
        border-radius: 999px;
        background: rgba(122, 140, 122, 0.18);
        color: var(--accent-dark);
        font-size: 0.75rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-weight: 600;
      }

      .review-card {
        background: var(--stone);
        border-radius: 22px;
        padding: 26px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        box-shadow: var(--shadow-soft);
        display: grid;
        gap: 16px;
        transition: transform 180ms ease, box-shadow 180ms ease;
      }

      .review-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 36px rgba(26, 24, 19, 0.08);
      }

      .review-jar {
        width: 100%;
        max-width: 180px;
        border-radius: 24px;
        border: 1px solid rgba(104, 96, 86, 0.25);
        background: #f7f0e4;
        padding: 12px;
        position: relative;
        overflow: hidden;
        justify-self: start;
        filter: blur(0.3px);
      }

      .review-jar::before {
        content: "";
        position: absolute;
        top: 6px;
        left: 10px;
        right: 10px;
        height: 14px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.45);
      }

      .review-jar-layers {
        display: grid;
        gap: 8px;
        padding-top: 16px;
      }

      .review-layer {
        border-radius: 12px;
        min-height: 22px;
        background: #e8dbc7;
        opacity: 0.9;
      }

      .review-quote {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: 1.05rem;
        color: var(--ink);
        line-height: 1.5;
        margin: 0;
      }

      .review-signature {
        font-size: 0.85rem;
        color: var(--muted);
        margin: 0;
      }

      .review-photo {
        width: 100%;
        max-width: 180px;
        border-radius: 18px;
        display: block;
        object-fit: cover;
        filter: saturate(0.9) contrast(0.95);
        box-shadow: 0 10px 20px rgba(26, 24, 19, 0.08);
        justify-self: start;
      }

      .mini-cart {
        position: fixed;
        right: 24px;
        bottom: 24px;
        width: min(320px, 90vw);
        background: var(--stone);
        border-radius: 22px;
        border: 1px solid rgba(35, 32, 28, 0.08);
        box-shadow: var(--shadow-soft);
        padding: 18px;
        display: grid;
        gap: 12px;
        z-index: 20;
      }

      .cart-title {
        font-family: Palatino, "Palatino Linotype", "Book Antiqua", Georgia,
          "Times New Roman", Times, serif;
        font-size: 1.2rem;
        margin: 0;
      }

      .cart-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .cart-close {
        border: 1px solid rgba(35, 32, 28, 0.12);
        background: #fff;
        border-radius: 999px;
        padding: 2px 8px;
        font-size: 0.85rem;
        cursor: pointer;
        color: var(--muted);
      }

      .cart-close:hover {
        color: var(--ink);
      }

      .cart-hidden {
        display: none;
      }

      .cart-fab {
        position: fixed;
        right: 24px;
        bottom: 24px;
        padding: 10px 16px;
        border-radius: 999px;
        border: 1px solid rgba(35, 32, 28, 0.12);
        background: var(--stone);
        box-shadow: var(--shadow-soft);
        font-size: 0.85rem;
        color: var(--ink);
        cursor: pointer;
        z-index: 19;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .cart-fab span {
        color: var(--muted);
      }

      .cart-fab.is-hidden {
        display: none;
      }

      .cart-items {
        display: grid;
        gap: 10px;
        max-height: 240px;
        overflow: auto;
        padding-right: 4px;
      }

      .cart-item {
        background: rgba(255, 255, 255, 0.6);
        border-radius: 14px;
        padding: 10px 12px;
        border: 1px solid rgba(35, 32, 28, 0.06);
        display: grid;
        gap: 6px;
      }

      .cart-item-name {
        font-size: 0.9rem;
        color: var(--ink);
        font-weight: 600;
      }

      .cart-item-meta {
        font-size: 0.8rem;
        color: var(--muted);
      }

      .cart-item-controls {
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .cart-btn {
        border: 1px solid rgba(35, 32, 28, 0.12);
        background: #fff;
        border-radius: 999px;
        padding: 2px 8px;
        font-size: 0.8rem;
        cursor: pointer;
      }

      .cart-qty {
        font-size: 0.85rem;
        color: var(--ink);
        min-width: 16px;
        text-align: center;
      }

      .cart-summary {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.9rem;
        color: var(--muted);
      }

      .cart-summary strong {
        color: var(--ink);
      }

      .cart-date {
        display: grid;
        gap: 6px;
      }

      .cart-date label {
        font-size: 0.8rem;
        color: var(--muted);
      }

      .cart-date input {
        border: 1px solid rgba(35, 32, 28, 0.12);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 0.9rem;
        background: #fff;
        color: var(--ink);
      }

      .cart-empty {
        font-size: 0.85rem;
        color: var(--muted);
      }

      .faq {
        display: grid;
        gap: 12px;
      }

      .faq-item {
        border-radius: 24px;
        background: var(--stone);
        border: 1px solid rgba(35, 32, 28, 0.08);
        box-shadow: var(--shadow-soft);
        overflow: hidden;
        transition: transform 180ms ease, box-shadow 180ms ease;
      }

      .faq-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 36px rgba(26, 24, 19, 0.08);
      }

      .faq-question {
        width: 100%;
        text-align: left;
        border: none;
        background: transparent;
        padding: 18px 22px;
        font-size: 1rem;
        font-weight: 600;
        color: var(--ink);
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
      }

      .faq-question span {
        color: var(--muted);
        font-weight: 500;
        transition: transform 200ms ease;
      }

      .faq-item.open .faq-question span {
        transform: rotate(45deg);
      }

      .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 260ms ease;
      }

      .faq-answer p {
        padding: 0 22px 18px;
        margin: 0;
      }

      footer {
        padding-bottom: 48px;
      }

      footer small {
        color: var(--muted);
      }

      @media (max-width: 960px) {
        .variety-card {
          grid-template-columns: 1fr;
        }

        .jar-visual {
          max-width: 100%;
        }

        .reviews-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 780px) {
        .process-card {
          padding: 32px 26px;
          border-radius: 28px;
        }

        .process-grid {
          grid-template-columns: 1fr;
          gap: 24px;
        }

        .reviews-grid {
          grid-template-columns: 1fr;
        }

        .timeline {
          grid-template-columns: 1fr;
          text-align: left;
        }
      }

      @media (max-width: 720px) {
        header .container {
          gap: 16px;
        }

        .site-nav {
          display: none;
        }

        .hero-grid {
          grid-template-columns: 1fr;
        }

        .hero-jar {
          min-height: 300px;
        }

        .variety-grid {
          grid-template-columns: 1fr;
        }

        .mini-cart {
          position: static;
          width: 100%;
          margin-top: 24px;
        }

        .cart-fab {
          position: static;
          margin-top: 16px;
        }

        .review-jar,
        .review-photo {
          justify-self: center;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        html {
          scroll-behavior: auto;
        }

        * {
          animation: none !important;
          transition-duration: 0ms !important;
        }

        .cube {
          animation: none;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="logo">
          <span class="cube" aria-hidden="true"></span>
          <span>CUBED</span>
        </div>
        <nav class="site-nav" aria-label="Primary">
          <a href="#varieties">Varieties</a>
          <a href="#tracking">Delivery</a>
          <a href="#faq">FAQ</a>
        </nav>
        <a class="btn btn-primary header-cta" href="#varieties">Pre-order now</a>
      </div>
    </header>
    <main>
      <section id="hero">
        <div class="container">
          <div class="hero-grid">
            <div class="hero-text">
              <div class="hero-label">Olivier in jars</div>
              <h1 class="hero-title">
                Olivier, but modern.<br />
                Fresh cubes, neat jars,<br />
                no fuss.
              </h1>
              <p class="hero-subtitle">
                A classic salad reimagined for city life.
              </p>
              <p class="hero-pronounce">
                New here? It is pronounced “oh-lee-vee-AY.”
              </p>
              <p class="hero-body">
                CUBED is a small-batch London studio turning a nostalgic salad
                into something tidy, modern, and portable. We dice every
                ingredient into tiny cubes, layer it in glass, and deliver it
                chilled.
              </p>
              <div class="hero-actions">
                <a class="btn btn-primary" href="#varieties">Pre-order</a>
                <a class="btn btn-outline" href="#varieties">See varieties</a>
              </div>
            </div>
            <div class="hero-jar">
              <div class="hero-jar-outline" aria-hidden="true">
                <div class="hero-jar-lid"></div>
                <div class="hero-jar-opening"></div>
                <div class="hero-jar-dropzone"></div>
                <div class="hero-jar-cubes"></div>
                <div class="hero-jar-content">
                  <div class="hero-jar-layers">
                    <div class="hero-jar-layer" style="background:#e8dbc7;"></div>
                    <div class="hero-jar-layer" style="background:#c8d3b8;"></div>
                    <div class="hero-jar-layer" style="background:#d8c5a6;"></div>
                    <div class="hero-jar-layer" style="background:#c6a48a;"></div>
                    <div class="hero-jar-layer" style="background:#a7b59a;"></div>
                    <div class="hero-jar-layer" style="background:#efe6d7;"></div>
                  </div>
                </div>
              </div>
              <button class="jar-toggle" type="button" data-anim-toggle>
                Animation: On
              </button>
            </div>
          </div>
        </div>
      </section>
      <section id="process">
        <div class="container">
          <div class="process-card" aria-label="Process steps">
            <div class="process-grid">
              <article>
                <p class="step-label">Step 1</p>
                <h2 class="step-title">Dice</h2>
                <p class="step-text">
                  Every ingredient is cut into tiny cubes for a clean, classic bite.
                </p>
              </article>
              <article>
                <p class="step-label">Step 2</p>
                <h2 class="step-title">Layer</h2>
                <p class="step-text">
                  We stack each layer by hand to keep texture and flavor distinct.
                </p>
              </article>
              <article>
                <p class="step-label">Step 3</p>
                <h2 class="step-title">Chill &amp; deliver</h2>
                <p class="step-text">
                  Jars are chilled immediately and delivered ready to eat.
                </p>
              </article>
            </div>
          </div>
        </div>
      </section>
      <section id="varieties">
        <div class="container">
          <p class="variety-intro">
            We make it with care — every cube, every layer.
          </p>
          <div class="variety-grid">
            <article class="variety-card" data-variety-id="classic" data-variety-name="Classic Olivier">
              <div>
                <div class="variety-badge">Best seller</div>
                <h3 class="variety-name">Classic Olivier</h3>
                <p class="variety-tagline">The nostalgic classic, diced to perfection.</p>
                <p class="variety-desc">
                  Our city-ready take on a nostalgic classic. Every ingredient is diced
                  into tiny, even cubes, then layered for the perfect forkful — creamy,
                  crisp, and comforting. Tidy, balanced, and seriously addictive.
                </p>
                <div class="nutrition-row">
                  <span>430 kcal</span>
                  • Protein 18g / Carbs 32g / Fat 24g
                </div>
                <div class="size-options" role="group" aria-label="Size">
                  <button class="size-pill" type="button" data-size="100g" data-price="6">
                    100g · £6
                  </button>
                  <button
                    class="size-pill is-active"
                    type="button"
                    data-size="250g"
                    data-price="9"
                  >
                    250g · £9
                  </button>
                  <button class="size-pill" type="button" data-size="500g" data-price="15">
                    500g · £15
                  </button>
                </div>
                <button class="add-to-cart" type="button">Add to cart</button>
                <p class="allergens">Allergens: egg</p>
              </div>
              <div class="variety-visual">
                <div class="jar-visual" aria-hidden="true">
                  <div class="jar-visual-layers">
                    <div class="jar-layer" style="background:#e7d6bd;">Potato — 70g</div>
                    <div class="jar-layer" style="background:#e4b27f;">Carrot — 35g</div>
                    <div class="jar-layer" style="background:#a9bc7e;">Peas — 35g</div>
                    <div class="jar-layer" style="background:#efe1c3;">Egg — 40g</div>
                    <div class="jar-layer" style="background:#d4a08a;">Ham — 45g</div>
                    <div class="jar-layer" style="background:#b7c19a;">Pickles — 20g</div>
                    <div class="jar-layer" style="background:#f1e7d7;">Creamy dressing — 25g</div>
                  </div>
                </div>
              </div>
            </article>
            <article class="variety-card" data-variety-id="caviar" data-variety-name="Caviar Night">
              <div>
                <div class="variety-badge">New</div>
                <h3 class="variety-name">Caviar Night</h3>
                <p class="variety-tagline">A little luxury, layered in glass.</p>
                <p class="variety-desc">
                  A dressed-up Olivier for nights in (or out). Silky salmon layers, a
                  touch of briny caviar, and that familiar creamy finish — rich, elegant,
                  and surprisingly light on the palate. A little luxury, the CUBED way.
                </p>
                <div class="nutrition-row">
                  <span>460 kcal</span>
                  • Protein 22g / Carbs 28g / Fat 26g
                </div>
                <div class="size-options" role="group" aria-label="Size">
                  <button class="size-pill" type="button" data-size="100g" data-price="6">
                    100g · £6
                  </button>
                  <button
                    class="size-pill is-active"
                    type="button"
                    data-size="250g"
                    data-price="9"
                  >
                    250g · £9
                  </button>
                  <button class="size-pill" type="button" data-size="500g" data-price="15">
                    500g · £15
                  </button>
                </div>
                <button class="add-to-cart" type="button">Add to cart</button>
                <p class="allergens">Allergens: egg, fish</p>
              </div>
              <div class="variety-visual">
                <div class="jar-visual" aria-hidden="true">
                  <div class="jar-visual-layers">
                    <div class="jar-layer" style="background:#e2d3b7;">Potato — 60g</div>
                    <div class="jar-layer" style="background:#e6b180;">Carrot — 30g</div>
                    <div class="jar-layer" style="background:#a7bb7c;">Peas — 30g</div>
                    <div class="jar-layer" style="background:#f0dfc5;">Egg — 35g</div>
                    <div class="jar-layer" style="background:#e1a28a;">Salmon — 55g</div>
                    <div class="jar-layer" style="background:#b7c19a;">Pickles — 15g</div>
                    <div class="jar-layer" style="background:#f1e7d7;">Creamy dressing — 20g</div>
                    <div class="jar-layer" style="background:#4b4f52; color:#f2efe9;">Caviar — 5g</div>
                  </div>
                </div>
              </div>
            </article>
            <article class="variety-card" data-variety-id="vegan" data-variety-name="Vegan">
              <div>
                <div class="variety-badge">Vegan</div>
                <h3 class="variety-name">Vegan</h3>
                <p class="variety-tagline">Plant-based, still creamy.</p>
                <p class="variety-desc">
                  Plant-based, but still indulgent. Bright veggies, chickpeas for bite,
                  and a smooth vegan mayo that keeps it classic without feeling heavy.
                  Clean, fresh, and layered to stay distinct.
                </p>
                <div class="nutrition-row">
                  <span>410 kcal</span>
                  • Protein 13g / Carbs 46g / Fat 18g
                </div>
                <div class="size-options" role="group" aria-label="Size">
                  <button class="size-pill" type="button" data-size="100g" data-price="6">
                    100g · £6
                  </button>
                  <button
                    class="size-pill is-active"
                    type="button"
                    data-size="250g"
                    data-price="9"
                  >
                    250g · £9
                  </button>
                  <button class="size-pill" type="button" data-size="500g" data-price="15">
                    500g · £15
                  </button>
                </div>
                <button class="add-to-cart" type="button">Add to cart</button>
                <p class="allergens">Allergens: —</p>
              </div>
              <div class="variety-visual">
                <div class="jar-visual" aria-hidden="true">
                  <div class="jar-visual-layers">
                    <div class="jar-layer" style="background:#e7d6bd;">Potato — 75g</div>
                    <div class="jar-layer" style="background:#e6b47f;">Carrot — 35g</div>
                    <div class="jar-layer" style="background:#a1b97a;">Peas — 45g</div>
                    <div class="jar-layer" style="background:#b9c4a4;">Pickles — 20g</div>
                    <div class="jar-layer" style="background:#e8d4a6;">Chickpeas — 45g</div>
                    <div class="jar-layer" style="background:#f1e7d7;">Vegan mayo — 30g</div>
                  </div>
                </div>
              </div>
            </article>
            <article class="variety-card" data-variety-id="lowcal" data-variety-name="Low-cal">
              <div>
                <div class="variety-badge">Light</div>
                <h3 class="variety-name">Low-cal</h3>
                <p class="variety-tagline">Light, fresh, and crisp.</p>
                <p class="variety-desc">
                  Sharper, lighter, and extra fresh. Lean protein, crisp veg, and a
                  tangy yogurt-style dressing make this the everyday jar — satisfying
                  without the post-lunch slump. All the Olivier comfort, dialed down.
                </p>
                <div class="nutrition-row">
                  <span>290 kcal</span>
                  • Protein 22g / Carbs 28g / Fat 9g
                </div>
                <div class="size-options" role="group" aria-label="Size">
                  <button class="size-pill" type="button" data-size="100g" data-price="6">
                    100g · £6
                  </button>
                  <button
                    class="size-pill is-active"
                    type="button"
                    data-size="250g"
                    data-price="9"
                  >
                    250g · £9
                  </button>
                  <button class="size-pill" type="button" data-size="500g" data-price="15">
                    500g · £15
                  </button>
                </div>
                <button class="add-to-cart" type="button">Add to cart</button>
                <p class="allergens">Allergens: egg</p>
              </div>
              <div class="variety-visual">
                <div class="jar-visual" aria-hidden="true">
                  <div class="jar-visual-layers">
                    <div class="jar-layer" style="background:#e3d6c2;">Potato — 40g</div>
                    <div class="jar-layer" style="background:#e6b27f;">Carrot — 35g</div>
                    <div class="jar-layer" style="background:#a2bc78;">Peas — 45g</div>
                    <div class="jar-layer" style="background:#f0e5cf;">Egg white — 35g</div>
                    <div class="jar-layer" style="background:#d3b29f;">Turkey/lean ham — 45g</div>
                    <div class="jar-layer" style="background:#b7c19a;">Pickles — 25g</div>
                    <div class="jar-layer" style="background:#efe6d8;">Light yogurt dressing — 25g</div>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>
      <section id="reviews">
        <div class="container">
          <div class="reviews-intro">
            <p class="reviews-title">Loved quietly, jar by jar.</p>
            <p class="reviews-subtitle">What our customers say</p>
          </div>
          <div class="reviews-grid">
            <article class="review-card">
              <img class="review-photo" src="reviews_anna.png" alt="Review photo of Anna" />
              <p class="review-quote">
                “It tastes exactly like the Olivier I grew up with — just cleaner,
                fresher, and beautifully balanced. I didn’t expect to feel nostalgic
                from a jar.”
              </p>
              <p class="review-signature">— Anna, London</p>
            </article>
            <article class="review-card">
              <img class="review-photo" src="reviews_michael.png" alt="Review photo of Michael" />
              <p class="review-quote">
                “Every layer makes sense. You can actually taste each ingredient instead
                of everything blending into one. Thoughtful and oddly comforting.”
              </p>
              <p class="review-signature">— Michael, Hackney</p>
            </article>
            <article class="review-card">
              <img class="review-photo" src="reviews_sofia.png" alt="Review photo of Sofia" />
              <p class="review-quote">
                “I ordered it out of curiosity and ended up planning my next one before
                I finished the jar. Simple, elegant, and quietly addictive.”
              </p>
              <p class="review-signature">— Sofia, Shoreditch</p>
            </article>
            <article class="review-card">
              <img class="review-photo" src="reviews_daniel.png" alt="Review photo of Daniel" />
              <p class="review-quote">
                “It feels handmade in the best way — like someone cared about every
                cube. Light, fresh, and surprisingly satisfying.”
              </p>
              <p class="review-signature">— Daniel, Islington</p>
            </article>
          </div>
        </div>
      </section>
      <section id="tracking">
        <div class="container">
          <div class="tracking-intro">
            <p class="tracking-title">From studio to doorstep.</p>
            <p class="tracking-subtitle">A calm look at your jar’s journey</p>
          </div>
          <div class="timeline-card">
            <div class="timeline">
              <div class="timeline-step">
                <div class="timeline-label">Step 1</div>
                <p class="timeline-title">Dice</p>
                <div class="timeline-time">8:30 AM</div>
              </div>
              <div class="timeline-step">
                <div class="timeline-label">Step 2</div>
                <p class="timeline-title">Layer</p>
                <div class="timeline-time">10:00 AM</div>
              </div>
              <div class="timeline-step">
                <div class="timeline-label">Step 3</div>
                <p class="timeline-title">Chill &amp; deliver</p>
                <div class="timeline-time">12:30 PM</div>
              </div>
            </div>
          </div>
          <div class="timeslot-card">
            <table class="timeslot-table">
              <colgroup>
                <col style="width: 33.33%" />
                <col style="width: 33.33%" />
                <col style="width: 33.33%" />
              </colgroup>
              <thead>
                <tr>
                  <th>Timeslot</th>
                  <th>Window</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="slot-name">Morning</td>
                  <td>09:00–11:00</td>
                  <td><span class="slot-tag">Open</span></td>
                </tr>
                <tr>
                  <td class="slot-name">Midday</td>
                  <td>11:30–13:30</td>
                  <td><span class="slot-tag">Limited</span></td>
                </tr>
                <tr>
                  <td class="slot-name">Afternoon</td>
                  <td>14:00–16:00</td>
                  <td><span class="slot-tag">Open</span></td>
                </tr>
                <tr>
                  <td class="slot-name">Evening</td>
                  <td>17:30–19:30</td>
                  <td><span class="slot-tag">Waitlist</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <section id="cart">
        <div class="container">
          <aside class="mini-cart" aria-live="polite" data-mini-cart>
            <div class="cart-header">
              <h2 class="cart-title">Mini cart</h2>
              <button class="cart-close" type="button" data-cart-close>Close</button>
            </div>
            <div class="cart-items" data-cart-items>
              <p class="cart-empty">Your cart is empty.</p>
            </div>
            <div class="cart-summary">
              <span>Subtotal</span>
              <strong data-cart-total>£0</strong>
            </div>
            <div class="cart-date">
              <label for="delivery-date">Delivery date</label>
              <input id="delivery-date" name="delivery-date" type="date" />
            </div>
          </aside>
          <button class="cart-fab is-hidden" type="button" data-cart-open>
            Cart <span data-cart-count>0</span>
          </button>
        </div>
      </section>
      <section id="faq">
        <div class="container">
          <h2>FAQ</h2>
          <div class="faq" data-accordion>
            <div class="faq-item">
              <button class="faq-question" type="button">
                What is Olivier?
                <span>+</span>
              </button>
              <div class="faq-answer">
                <p>
                  A classic Eastern European salad of finely diced vegetables
                  and protein bound with a creamy dressing. We keep it crisp,
                  layered, and modern.
                </p>
              </div>
            </div>
            <div class="faq-item">
              <button class="faq-question" type="button">
                How do you keep it fresh?
                <span>+</span>
              </button>
              <div class="faq-answer">
                <p>
                  We chill immediately after assembly, seal in glass jars, and
                  deliver in insulated packaging.
                </p>
              </div>
            </div>
            <div class="faq-item">
              <button class="faq-question" type="button">
                How long does it last in the fridge?
                <span>+</span>
              </button>
              <div class="faq-answer">
                <p>
                  Best within 3 days of delivery. Keep sealed and refrigerated
                  for optimal texture and flavor.
                </p>
              </div>
            </div>
            <div class="faq-item">
              <button class="faq-question" type="button">
                Do you deliver in London?
                <span>+</span>
              </button>
              <div class="faq-answer">
                <p>
                  Yes, we currently deliver across Greater London with chilled,
                  same-day and next-day options.
                </p>
              </div>
            </div>
            <div class="faq-item">
              <button class="faq-question" type="button">
                Any allergens?
                <span>+</span>
              </button>
              <div class="faq-answer">
                <p>
                  Common allergens include egg and dairy in the classic dressing.
                  Caviar Night contains fish. Vegan uses plant-based mayo. Please
                  check each variety for specifics.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <div class="container">
        <p>CUBED — Olivier in jars, made in London.</p>
        <small>Pronounced oh-lee-vee-AY.</small>
      </div>
    </footer>
    <script>
      const accordion = document.querySelector("[data-accordion]");
      if (accordion) {
        accordion.querySelectorAll(".faq-item").forEach((item) => {
          const button = item.querySelector(".faq-question");
          const answer = item.querySelector(".faq-answer");
          button.addEventListener("click", () => {
            const isOpen = item.classList.contains("open");
            accordion.querySelectorAll(".faq-item").forEach((other) => {
              other.classList.remove("open");
              const otherAnswer = other.querySelector(".faq-answer");
              if (otherAnswer) {
                otherAnswer.style.maxHeight = "0px";
              }
            });
            if (!isOpen) {
              item.classList.add("open");
              answer.style.maxHeight = `${answer.scrollHeight}px`;
            }
          });
        });
      }

      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      );
      const jar = document.querySelector(".hero-jar-outline");
      const cubesContainer = jar?.querySelector(".hero-jar-cubes");
      const layersContainer = jar?.querySelector(".hero-jar-layers");
      const layers = jar
        ? Array.from(jar.querySelectorAll(".hero-jar-layer"))
        : [];
      const toggle = document.querySelector("[data-anim-toggle]");
      const palette = [
        "#e6d9c3",
        "#d5a26f",
        "#9db27a",
        "#7f8c6a",
        "#f0e5cf",
        "#c8a08e",
        "#f6f1e6",
      ];
      const maxCubes = 45;
      let cubeTimerId = null;
      let layerIndex = 0;
      let animationEnabled = !prefersReducedMotion.matches;

      const initLayerHeights = () => {
        layers.forEach((layer) => {
          const height = layer.offsetHeight;
          layer.dataset.base = String(height);
          layer.style.setProperty("--layer-h", `${height}px`);
        });
      };

      const getContentMetrics = () => {
        if (!jar || !layersContainer) {
          return null;
        }
        const content = jar.querySelector(".hero-jar-content");
        const contentHeight = content ? content.clientHeight : 0;
        const styles = getComputedStyle(layersContainer);
        const gap =
          parseFloat(styles.gap || styles.rowGap || styles.columnGap) || 0;
        return { contentHeight, gap };
      };

      const growLayer = () => {
        if (!layers.length) {
          return;
        }
        const metrics = getContentMetrics();
        if (!metrics) {
          return;
        }
        const { contentHeight, gap } = metrics;
        const maxTotal = contentHeight - gap * (layers.length - 1) - 4;
        let total = 0;
        layers.forEach((layer) => {
          const base = parseFloat(layer.dataset.base) || 0;
          const current =
            parseFloat(layer.style.getPropertyValue("--layer-h")) || base;
          total += current;
        });
        const target = layers[layerIndex % layers.length];
        const base = parseFloat(target.dataset.base) || 0;
        const current =
          parseFloat(target.style.getPropertyValue("--layer-h")) || base;
        const increment = 1 + Math.random();
        const next = Math.min(current + increment, base + 14);
        target.style.setProperty("--layer-h", `${next}px`);
        total = total - current + next;
        layerIndex += 1;
        if (total >= maxTotal) {
          layers.forEach((layer) => {
            const baseHeight = parseFloat(layer.dataset.base) || 0;
            layer.style.setProperty("--layer-h", `${baseHeight}px`);
          });
        }
      };

      const spawnCube = () => {
        if (!animationEnabled || !jar || !cubesContainer) {
          return;
        }
        const cube = document.createElement("div");
        cube.className = "cube-drop";
        const size = 10 + Math.random() * 4;
        cube.style.width = `${size}px`;
        cube.style.height = `${size}px`;
        const opening = jar.querySelector(".hero-jar-opening");
        const content = jar.querySelector(".hero-jar-content");
        const openLeft = opening ? opening.offsetLeft : 24;
        const openWidth = opening ? opening.offsetWidth : jar.clientWidth - 48;
        const x = openLeft + Math.random() * Math.max(0, openWidth - size);
        const openTop = opening ? opening.offsetTop : 10;
        cube.style.left = `${x}px`;
        cube.style.top = `${openTop}px`;
        const contentHeight = content ? content.clientHeight : jar.clientHeight;
        const fallDistance = Math.max(0, contentHeight - size - 12);
        const drift = (Math.random() * 10 - 5).toFixed(2);
        const rot = (Math.random() * 16 - 8).toFixed(2);
        const duration = (1.4 + Math.random() * 0.7).toFixed(2);
        cube.style.setProperty("--fall-distance", `${fallDistance}px`);
        cube.style.setProperty("--drift", `${drift}px`);
        cube.style.setProperty("--rot", `${rot}deg`);
        cube.style.setProperty("--duration", `${duration}s`);
        cube.style.background =
          palette[Math.floor(Math.random() * palette.length)];
        cubesContainer.appendChild(cube);
        if (cubesContainer.children.length > maxCubes) {
          cubesContainer.removeChild(cubesContainer.firstElementChild);
        }
        window.setTimeout(() => {
          cube.remove();
          growLayer();
        }, parseFloat(duration) * 1000);
      };

      const scheduleCubes = () => {
        if (!animationEnabled) {
          return;
        }
        const delay = 420 + Math.random() * 380;
        cubeTimerId = window.setTimeout(() => {
          spawnCube();
          spawnCube();
          spawnCube();
          scheduleCubes();
        }, delay);
      };

      const stopCubes = () => {
        if (cubeTimerId) {
          window.clearTimeout(cubeTimerId);
          cubeTimerId = null;
        }
        if (cubesContainer) {
          cubesContainer.innerHTML = "";
        }
      };

      const updateToggle = () => {
        if (!toggle) {
          return;
        }
        if (prefersReducedMotion.matches) {
          toggle.textContent = "Animation disabled";
          toggle.disabled = true;
          return;
        }
        toggle.textContent = animationEnabled ? "Animation: On" : "Animation: Off";
        toggle.disabled = false;
      };

      if (jar && layers.length) {
        initLayerHeights();
      }

      if (!prefersReducedMotion.matches) {
        scheduleCubes();
      } else {
        animationEnabled = false;
      }
      updateToggle();

      if (toggle && !prefersReducedMotion.matches) {
        toggle.addEventListener("click", () => {
          animationEnabled = !animationEnabled;
          updateToggle();
          if (animationEnabled) {
            scheduleCubes();
          } else {
            stopCubes();
          }
        });
      }

      window.addEventListener("resize", () => {
        if (jar && layers.length) {
          initLayerHeights();
        }
      });

      const cartItemsEl = document.querySelector("[data-cart-items]");
      const cartTotalEl = document.querySelector("[data-cart-total]");
      const cartEl = document.querySelector("[data-mini-cart]");
      const cartCloseBtn = document.querySelector("[data-cart-close]");
      const cartOpenBtn = document.querySelector("[data-cart-open]");
      const cartCountEl = document.querySelector("[data-cart-count]");
      const cart = new Map();

      const formatPrice = (value) => `£${value.toFixed(2)}`;

      const renderCart = () => {
        if (!cartItemsEl || !cartTotalEl) {
          return;
        }
        cartItemsEl.innerHTML = "";
        let subtotal = 0;
        let totalCount = 0;
        if (cart.size === 0) {
          const empty = document.createElement("p");
          empty.className = "cart-empty";
          empty.textContent = "Your cart is empty.";
          cartItemsEl.appendChild(empty);
          cartTotalEl.textContent = "£0";
          if (cartCountEl) {
            cartCountEl.textContent = "0";
          }
          return;
        }
        cart.forEach((item, key) => {
          subtotal += item.price * item.qty;
          totalCount += item.qty;
          const row = document.createElement("div");
          row.className = "cart-item";
          row.innerHTML = `
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-meta">${item.size} · ${formatPrice(item.price)}</div>
            <div class="cart-item-controls">
              <button class="cart-btn" type="button" data-cart-action="minus" data-key="${key}" aria-label="Remove one">−</button>
              <span class="cart-qty">${item.qty}</span>
              <button class="cart-btn" type="button" data-cart-action="plus" data-key="${key}" aria-label="Add one">+</button>
              <button class="cart-btn" type="button" data-cart-action="remove" data-key="${key}" aria-label="Remove item">×</button>
            </div>
          `;
          cartItemsEl.appendChild(row);
        });
        cartTotalEl.textContent = formatPrice(subtotal);
        if (cartCountEl) {
          cartCountEl.textContent = String(totalCount);
        }
      };

      const updateCart = (key, item, delta) => {
        if (!cart.has(key)) {
          if (delta > 0) {
            cart.set(key, { ...item, qty: delta });
          }
        } else {
          const current = cart.get(key);
          const nextQty = current.qty + delta;
          if (nextQty <= 0) {
            cart.delete(key);
          } else {
            cart.set(key, { ...current, qty: nextQty });
          }
        }
        renderCart();
      };

      document.querySelectorAll(".size-options").forEach((group) => {
        group.addEventListener("click", (event) => {
          const button = event.target.closest(".size-pill");
          if (!button) {
            return;
          }
          group.querySelectorAll(".size-pill").forEach((pill) => {
            pill.classList.toggle("is-active", pill === button);
          });
        });
      });

      document.querySelectorAll(".add-to-cart").forEach((button) => {
        button.addEventListener("click", () => {
          const card = button.closest(".variety-card");
          if (!card) {
            return;
          }
          const selected = card.querySelector(".size-pill.is-active");
          if (!selected) {
            return;
          }
          const size = selected.dataset.size;
          const price = parseFloat(selected.dataset.price || "0");
          const name = card.dataset.varietyName || "CUBED jar";
          const key = `${card.dataset.varietyId}-${size}`;
          updateCart(key, { name, size, price }, 1);
        });
      });

      if (cartItemsEl) {
        cartItemsEl.addEventListener("click", (event) => {
          const action = event.target.dataset.cartAction;
          const key = event.target.dataset.key;
          if (!action || !key || !cart.has(key)) {
            return;
          }
          if (action === "plus") {
            updateCart(key, cart.get(key), 1);
          } else if (action === "minus") {
            updateCart(key, cart.get(key), -1);
          } else if (action === "remove") {
            cart.delete(key);
            renderCart();
          }
        });
      }

      if (cartCloseBtn && cartEl) {
        cartCloseBtn.addEventListener("click", () => {
          cartEl.classList.add("cart-hidden");
          if (cartOpenBtn) {
            cartOpenBtn.classList.remove("is-hidden");
          }
        });
      }

      if (cartOpenBtn && cartEl) {
        cartOpenBtn.addEventListener("click", () => {
          cartEl.classList.remove("cart-hidden");
          cartOpenBtn.classList.add("is-hidden");
        });
      }

      renderCart();
    </script>
  </body>
</html>
